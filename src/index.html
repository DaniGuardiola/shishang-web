<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shishang</title>
  <link rel="stylesheet" href="styles.build.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Martel:light">
</head>

<body class="justify-center max-w-5xl mx-auto">
  <header>
    <div id="contact-bar"></div>
    <div id="logo"></div>
    <nav></nav>
  </header>
  <section id="buffet" class="asd dfdf sdf"></section>
  <section id="menu" class="my-20">
    <div class="text-center title pb-8">
      <div>
        <h1 class="font-bold menu-title-1">NUESTRA CARTA</h1>
      </div>
      <div>
        <h2 class="font-bold menu-title-2">¿QUÉ TE APETECE?</h2>
      </div>
    </div>
  </section>
  <section id="separator-granvia" class="h-40 bg-fixed bg-cover bg-no-repeat my-20"
    style="background-image: url('resources/granvia.png');">
  </section>
  </section>
  <section id="garbage" style="height: 100em; background-image: url('resources/granvia.jpg');">
  </section>
  <section id="location"></section>
  <section id="reasons"></section>
  <footer>
    <nav></nav>
  </footer>
  <script type="text/javascript">
    (() => {
      const menu = [{
        name: 'Entrantes',
        items: [{
          name: 'Rollitos de primavera',
          price: 1.20
        }, {
          name: 'Rollito de Vietnam (2 unidades)',
          price: 2.50
        }, {
          name: 'Empanadilla china (8 unidades)',
          price: 4.25
        }, {
          name: 'Tarta de calabaza (8 unidades)',
          price: 4.25
        }, {
          name: 'Ensalada de la casa',
          price: 3.55
        }, {
          name: 'Ensalada de alga, hongo, tofu, tomate, judiaverde, etc',
          price: 3.55
        }]
      },
      {
        name: "sopas",
        items: [
          {
            name: "Sopa de tiburón vegetal",
            price: 3.25
          },
          {
            name: "Sopa de miso",
            price: 3.25
          },
          {
            name: "Sopa de maiz",
            price: 3.25
          },
          {
            name: "Sopa de agripicante",
            price: 3.25
          },
          {
            name: "Sopa de huevo",
            price: 3.25
          }
        ]
      },
      {
        name: "arroces",
        items: [
          {
            name: "Arroz tres delicias",
            price: 3.80
          },
          {
            name: "Arroz integral con seta",
            price: 4.55
          },
          {
            name: "Arroz blanco",
            price: 1.80
          },
          {
            name: "Arroz frito con verduras",
            price: 4.05
          },
          {
            name: "Tallarines tres delicias",
            price: 4.05
          },
          {
            name: "Fideos chinos con verduras",
            price: 4.55
          }
        ]
      },
      {
        name: "carnes vegetarianas",
        items: [
          {
            name: "Arroz tres delicias",
            price: 3.80
          },
          {
            name: "Arroz integral con seta",
            price: 4.55
          },
          {
            name: "Arroz blanco",
            price: 1.80
          },
          {
            name: "Arroz frito con verduras",
            price: 4.05
          },
          {
            name: "Tallarines tres delicias",
            price: 4.05
          },
          {
            name: "Fideos chinos con verduras",
            price: 4.55
          }
        ]
      },
      {
        name: "pollo vegano",
        items: [
          {
            name: "Pollo vegano al limon",
            price: 4.80
          },
          {
            name: "Pollo vegano con almendras",
            price: 6.80
          },
          {
            name: "Pollo vegano de gongbao",
            price: 6.80
          },
          {
            name: "Pollo vegano al curry",
            price: 6.80
          },
          {
            name: "Pollo sesamos vegano salteada",
            price: 6.80
          },
          {
            name: "Muslo de pollo vegano frito/pieza",
            price: 1.80
          },
          {
            name: "Filete de pollo vegano al coco rallado",
            price: 6.80
          }
        ]
      },
      {
        name: "platos especiales",
        items: [
          {
            name: "Gamba vegana frita",
            price: 5.25
          },
          {
            name: "Gamba salteada con picante/ostras",
            price: 5.25
          },
          {
            name: "Pato vegano con bambu y setas chinas",
            price: 6.80
          },
          {
            name: "Pato vegano con salsa ostras",
            price: 6.80
          },
          {
            name: "Pato asado",
            price: 6.80
          },
          {
            name: "Familias feliz veganos",
            price: 6.25
          },
          {
            name: "Bola de yi pin",
            price: 6.80
          },
          {
            name: "1/2 Pollo vegano tailandia",
            price: 6.80
          },
          {
            name: "1/2 pollo vegano con salsas chinas",
            price: 6.80
          },
          {
            name: "Cordero vegano salteado",
            price: 6.80
          },
          {
            name: "Farafe (15 piezas)",
            price: 5.30
          },
          {
            name: "Bolitas tofu rebozada con verdura",
            price: 4.80
          },
          {
            name: "Calameres fritos (10 unidades)",
            price: 5.80
          },
          {
            name: "Aros de cebolla fritos",
            price: 4.25
          },
          {
            name: "Wan tun frito",
            price: 3.80
          },
          {
            name: "Sushi (8 piezas)",
            price: 3.80
          },
          {
            name: "Tempura",
            price: 3.80
          },
          {
            name: "Verduras salteadas",
            price: 3.80
          },
          {
            name: "Tofu a la plancha",
            price: 4.40
          },
          {
            name: "Tofu con salsa soja",
            price: 4.40
          },
          {
            name: "Mapo tofu (sabor picante)",
            price: 4.40
          }
        ]
      },
      {
        name: 'Menús especiales (solo noches de lunes a jueves)',
        items: [
          {
            header: 'Menú para 2 personas A',
            name: 'rollo de primavera(2)<br>ensalada china<br>arroz frito 3 delicias/tallarines<br>pollo limón/ternera con salsa de ostras (cualquier sabores)\ncon bebida y postre',
            price: 16.20
          },
          {
            header: 'Menú para 2 personas B',
            name: 'rollo de vietnamita (4)<br>arroz frito 3 delicias/fideo chino<br>gambas fritas (12)<br>pollo estilo goa-bao/ternera bambú y setas chinas con bebida y postre',
            price: 18.20
          },
          {
            header: 'Menú para 3 personas',
            name: 'rollo de primavera (3)<br>ensalada china<br>arroz frito 3 delicias/tallarines/fideo chino<br>pollo con limón/cerdo agridulce<br>ternera con salsa ostras (seta)<br>gamba con bambú y setas chinas con bebida y postre',
            price: 29.20
          },
        ]
      }
      ]

      const menuHeaderColor = 'bg-menu-header hover:bg-menu-header-hover'
      const menuHeaderClass = 'px-3 pt-2 pb-1 mt-3 font-bold text-xl'
      const itemElementPadding = 'lg:pl-8 lg:pr-10 px-3 py-3'

      function generateMenu() {
        const menuEl = document.querySelector('#menu')
        menu.forEach(menuSection => {
          const sectionEl = document.createElement('div')
          sectionEl.className = 'menu-section'
          menuEl.appendChild(sectionEl)

          const sectionHeader = document.createElement('div')
          sectionEl.appendChild(sectionHeader)

          sectionHeader.setAttribute('data-id', menuSection.name)
          sectionHeader.className = `text-center ${menuHeaderColor} ${menuHeaderClass} header title`
          sectionHeader.innerHTML = `<input class="hidden toggle" type="checkbox">
        <span class="lbl-toggle">${menuSection.name.toUpperCase()}</span>`

          const sectionContent = document.createElement('div')
          sectionEl.appendChild(sectionContent)

          sectionContent.className = 'overflow-hidden content'
          sectionContent.setAttribute('data-id', menuSection.name)
          sectionContent.setAttribute('collapsed', '')
          sectionContent.setAttribute('style', 'height: 0;')

          const sectionItems = document.createElement('ul')
          sectionContent.appendChild(sectionItems)

          menuSection.items.forEach(sectionItem => {
            const itemEl = document.createElement('li')
            sectionItems.appendChild(itemEl)

            let headerHtml = ''
            if (sectionItem.header) {
              headerHtml = `<div class="font-bold">${sectionItem.header}</div>`
            }


            itemEl.className = `flex ${itemElementPadding}`
            itemEl.innerHTML += `<span id="menu-item-name">
              ${headerHtml}
              <div>${sectionItem.name}</div>
            </span>
            <span class="flex-1" id="menu-item-spacer"></span>
            <span id="menu-item-price">${sectionItem.price.toFixed(2)}€</span>`
          })

        })
      }

      const collapseTimeout = {}

      function toggleCollapsible(id) {
        const contentEl = document.querySelector(`.menu-section .content[data-id="${id}"]`)
        const collapsed = contentEl.hasAttribute('collapsed')

        if (!collapsed) {
          contentEl.style.height = 0
          contentEl.setAttribute('collapsed', '')
        } else {
          const height = contentEl.querySelector('ul').getBoundingClientRect().height
          contentEl.style.height = `${height}px`
          contentEl.removeAttribute('collapsed')
        }
      }

      function setupMenuCollapsibles() {
        const headersEls = [...document.querySelectorAll('.menu-section .header')]
        headersEls.forEach(headerEl => headerEl.addEventListener('click', e => {
          const id = e.currentTarget.getAttribute('data-id')
          toggleCollapsible(id)
        }))
      }

      function init() {
        generateMenu()
        setupMenuCollapsibles()
      }

      init()

    })()
  </script>
</body>

</html>